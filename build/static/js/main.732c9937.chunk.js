(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{281:function(e,t,n){e.exports=n(696)},696:function(e,t,n){"use strict";n.r(t);var a=n(18),o=n(0),r=n.n(o),i=n(92),c=n.n(i),l=n(44);var s=function(e){var t=e.todos;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("br",null),0===t.length?r.a.createElement("h1",null,"All done"):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h5",null,"Todo List")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("h5",null,t.length," todos left"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("ul",{className:"list-group"},t.map(function(e,t){return r.a.createElement("li",{key:t.toString(),className:"list-group-item"},e)}))))))};var u=function(e){var t=e.badges,n=e.text,a=e.isSpeaking,o=e.onCompleteTodo;return r.a.createElement("div",{className:"Todo ".concat(a?"speaking":"")},r.a.createElement("h4",null,r.a.createElement("i",{className:"material-icons",style:{position:"absolute",bottom:10,right:20,color:"#99979c"}},"event"),n,r.a.createElement("button",{className:"float-right btn btn-success btn-sm",style:{marginLeft:10},onClick:o},"Complete")),r.a.createElement("p",null,t.map(function(e,t){var n=e.color,a=e.children;return r.a.createElement("span",{key:t.toString(),className:"badge badge-".concat(n),style:{marginRight:6}},a)})))};var m=Object(o.memo)(function(e){var t=e.notify,n=e.onCompleteTodo,a=e.id;Object(o.useEffect)(function(){"warning"===e.datetimecolor&&t()},[e.datetimetext]);var i=[{children:e.datetimetext,color:e.datetimecolor},{children:e.prioritytext,color:e.prioritycolor}];return r.a.createElement(u,{badges:i,onCompleteTodo:function(){return n(a)},text:e.text})}),d=n(155),f=n.n(d),p=function(e){var t=e.toggleTodo,n=e.todos,a=e.uid,o=e.notify;if(!n)return null;var i=n.map(function(e){return r.a.createElement(m,Object.assign({},e,{notify:function(){return o(e)},onCompleteTodo:function(){return t(e,a)}}))});return r.a.createElement(s,{todos:i})},g=n(22),b=n(10),E=n(275),v=n.n(E),h=n(30),y=["Noteworthy","Significant","Important"],N=["info","secondary","primary"],O=n(60),T=n.n(O),w=function(e,t){return t.priority-e.priority},k=function(e){return!e.hasOwnProperty("completed")||!e.completed},j=function(e){return null!==e&&e.hasOwnProperty("id")&&e.hasOwnProperty("text")&&e.hasOwnProperty("datetime")},C=function(e){return N[e.priority]},S=function(e){return y[e.priority]},x=function(e){return Object(h.isAfter)(Date.now(),e.datetime)?"danger":Object(h.differenceInMinutes)(e.datetime,Date.now())<5?"warning":"success"},R=function(e){return Object(h.distanceInWordsToNow)(e.datetime,{includeSeconds:!0,addSuffix:!0})};var I=Object(b.d)(Object(g.firebaseConnect)(function(e){var t=e.uid;return[{path:"todos/".concat(t)}]}),Object(l.b)(function(e,t){return e.firebase.data.todos?{todos:(n=e.firebase.data.todos,o=t.uid,n.hasOwnProperty(o)&&n[o]?Object.values(n[o]).filter(j).filter(k).sort(w).map(function(e){return Object(a.a)({},e,{prioritycolor:C(e),prioritytext:S(e),datetimecolor:x(e),datetimetext:R(e)})}):[])}:e;var n,o}))(p),_=I,D=n(280),M=n(276),P=n.n(M);function A(e){var t=e.todo,n=e.onSubmit,a=e.onDatetimeChange,o=e.onPriorityChange,i=e.onTextChange,c=e.onAdd;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("br",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"form-control text",type:"text",required:!0,value:t.text,autoFocus:!0,placeholder:"Write a todo",onKeyUp:n,onChange:i}),r.a.createElement(P.a,{locale:"nl-NL",minDate:new Date,onChange:a,value:t.datetime}),r.a.createElement("select",{className:"form-control priority",value:t.priority||0,onChange:o},r.a.createElement("option",{value:0},y[0]),r.a.createElement("option",{value:1},y[1]),r.a.createElement("option",{value:2},y[2])),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary",onClick:c},"Add")))))}var L=function(e){var t=e.addTodo,n=e.profile,i=e.login,c=e.uid,l=Object(o.useState)({text:"",priority:0,datetime:new Date}),s=Object(D.a)(l,2),u=s[0],m=s[1];function d(){""===u.text||n.isLoading||(n.isEmpty?i():t(u,c)&&m(Object(a.a)({},u,{text:""})))}return r.a.createElement("div",null,r.a.createElement(A,{todo:u,onSubmit:function(e){13===e.keyCode&&d()},onAdd:d,onPriorityChange:function(e){m(Object(a.a)({},u,{priority:e.target.value}))},onDatetimeChange:function(e){m(Object(a.a)({},u,{datetime:e}))},onTextChange:function(e){m(Object(a.a)({},u,{text:e.target.value}))}}))},F=L,U=n(19),X=n.n(U);n(635),n(637),n(697),n(641);n(644)({origin:!0});X.a.initializeApp({apiKey:"AIzaSyCcSDFLCkpRMSeujLrSdQqYb3iwQk7fS-M",authDomain:"chama-hooks.firebaseapp.com",databaseURL:"https://chama-hooks.firebaseio.com",projectId:"chama-hooks",storageBucket:"chama-hooks.appspot.com",messagingSenderId:"518384846061"});X.a.database(),new X.a.auth.GoogleAuthProvider,X.a.auth();var W=X.a.messaging();W.usePublicVapidKey("BN8krSM0CRd6YdRwSXa1xosJyF0236U39Ftk27Rr7lnkrLtsAba9XQ4cUSGyQMkzRkhEJ7iaR1p6WOjHFNRRdu0");var q=X.a.functions().httpsCallable("sendNotifications"),J=X.a,Q=(X.a,n(279)),V="ADD_NOTIFICATION",z="REMOVE_NOTIFICATION";var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case V:return Object(Q.a)(e).concat([t.payload]);case z:return e.filter(function(e){return e.id!==t.payload});default:return e}},K=Object(b.c)({firebase:g.firebaseStateReducer,notifications:B}),G={userProfile:"users"},H=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):b.d)(Object(b.a)(T.a))(b.e),Y=function(e){return Object(b.d)(Object(g.reactReduxFirebase)(J,G))(H)(K,{})},Z=n(278),$=function(e){var t=e.logout,n=e.login,a=e.uid,o=e.notifications,i=(e.displayName,e.removeNotification),c=e.profile;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},a?r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t()}},"Logout ",c.displayName):r.a.createElement("button",{className:"btn btn-success",onClick:function(){return n()}},"Login")))),r.a.createElement(Z.a,{position:"bottom-right",timeout:3e3,alerts:o||[],onDismiss:function(e){return i(e.id)}}))};n.d(t,"App",function(){return ee});var ee=Object(b.d)(Object(g.firebaseConnect)([]),Object(l.b)(function(e){return(t=e.firebase.profile).isEmpty||!t.isLoaded?{profile:e.firebase.profile}:{profile:e.firebase.profile,uid:e.firebase.auth.uid,notifications:e.notifications};var t},function(e,t){var n=t.firebase;return{login:function(){n.login({provider:"google",type:"popup"})},logout:function(){n.logout()},removeNotification:function(t){e(function(e){return{type:z,payload:e}}(t))},notify:function(e){return q(Object(a.a)({},e,{text:e.text+" "+e.datetimetext}))},setNotificationToken:function(e,t){n.set("notificationTokens/".concat(e,"/").concat(t),!0)},toggleTodo:function(e,t){n.set("todos/".concat(t,"/").concat(e.id,"/completed"),!e.completed)},addTodo:function(e,t){var o=function(e){return Object(a.a)({},e,{id:v()(e.text),datetime:Object(h.format)(e.datetime)})}(e);return n.set("todos/".concat(t,"/").concat(o.id),o)},startTimer:function(){e({type:O.START_TIMER,payload:{actionName:"UPDATE_TIME_FIELDS",timerName:"updateTimeFields",timerInterval:1e4}})},stopTimer:function(){e({type:O.STOP_TIMER,payload:{timerName:"updateTimeFields"}})},startCloudMessaging:function(t){console.log("start messaging"),W.onTokenRefresh(function(){W.getToken().then(function(e){t(e)}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})}),W.onMessage(function(t){var n;e({type:V,payload:{id:(n=t).from,type:"warning",message:n.data.title}})}),W.requestPermission().then(function(){return W.getToken()}).then(function(e){return t(e)}).catch(function(e){"messaging/permission-blocked"===e.code?console.log("Please Unblock Notification Request Manually"):console.log("Error Occurred",e)})},stopCloudMessaging:function(){console.log("stop messaging"),W.onMessage(function(){}),W.onTokenRefresh(function(){})}}}))(function(e){var t=e.startTimer,n=e.stopTimer,a=e.startCloudMessaging,i=e.stopCloudMessaging,c=e.setNotificationToken,l=e.uid,s=e.profile;return Object(o.useEffect)(function(){if(l)return a(function(e){return c(l,e)}),t(),function(){i(),n()}},[l]),r.a.createElement("div",null,r.a.createElement(F,e),l?r.a.createElement("div",{style:{minHeight:200}},r.a.createElement(_,e)):r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100}},s.isLoaded?"":r.a.createElement(f.a,{name:"double-bounce"})),r.a.createElement($,e))}),te=Y({}),ne=document.getElementById("root");c.a.render(r.a.createElement(l.a,{store:te},r.a.createElement(ee,null)),ne),"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)})}},[[281,2,1]]]);
//# sourceMappingURL=main.732c9937.chunk.js.map