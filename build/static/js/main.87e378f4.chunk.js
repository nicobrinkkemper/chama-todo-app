(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,n){e.exports=n(585)},585:function(e,t,n){"use strict";n.r(t);var o=n(5),a=n(0),r=n.n(a),i=n(245),c=n.n(i),s=n(246),l=n(39);var u=function(e){var t=e.todos;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("br",null),0===t.length?r.a.createElement("h1",null,"All done"):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h5",null,"Todo List")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("h5",null,t.length," todos left"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("ul",{className:"list-group"},t.map(function(e,t){return r.a.createElement("li",{key:t.toString(),className:"list-group-item"},e)}))))))};var d=function(e){var t=e.badges,n=e.text,o=e.isSpeaking,a=e.onCompleteTodo;return r.a.createElement("div",{className:"Todo ".concat(o?"speaking":"")},r.a.createElement("h4",null,r.a.createElement("i",{className:"material-icons",style:{position:"absolute",bottom:10,right:20,color:"#99979c"}},"event"),n,r.a.createElement("button",{className:"float-right btn btn-success btn-sm",style:{marginLeft:10},onClick:a},"Complete")),r.a.createElement("p",null,t.map(function(e,t){var n=e.color,o=e.children;return r.a.createElement("span",{key:t.toString(),className:"badge badge-".concat(n),style:{marginRight:6}},o)})))};var m=Object(a.memo)(function(e){var t=e.notify,n=e.onCompleteTodo,o=e.id;Object(a.useEffect)(function(){"warning"===e.datetimecolor&&t()},[e.datetimecolor]);var i=[{children:e.datetimetext,color:e.datetimecolor},{children:e.prioritytext,color:e.prioritycolor}];return r.a.createElement(d,{badges:i,onCompleteTodo:function(){return n(o)},text:e.text})}),p=function(e){var t=e.toggleTodo,n=e.todos,a=e.uid,i=e.userFieldId,c=e.notify,s=n.map(function(e){return r.a.createElement(m,Object.assign({},e,{notify:function(){return c(Object(o.a)({},e,{userFieldId:i,text:e.text+" "+e.datetimetext}))},onCompleteTodo:function(){return t(e,a)}}))});return r.a.createElement(u,{todos:s})},f=n(11),g=n(12),b=Object(g.d)(Object(f.firebaseConnect)(["todos"]),Object(l.b)(function(e){return{firebaseTodos:e.firebase.data.todos}}))(p),v=b,E=n(251),h=n(249),O=n.n(h),y=["Noteworhty","Significant","Important"],j=["info","secondary","primary"];function T(e){var t=e.todo,n=e.onSubmit,o=e.onDatetimeChange,a=e.onPriorityChange,i=e.onTextChange,c=e.onAdd;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("br",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"form-control text",type:"text",required:!0,value:t.text,autoFocus:!0,placeholder:"Write a todo",onKeyUp:n,onChange:i}),r.a.createElement(O.a,{locale:"nl-NL",minDate:new Date,onChange:o,value:t.datetime}),r.a.createElement("select",{className:"form-control priority",value:t.priority||0,onChange:a},r.a.createElement("option",{value:0},y[0]),r.a.createElement("option",{value:1},y[1]),r.a.createElement("option",{value:2},y[2])),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary",onClick:c},"Add")))))}var w=n(81),N=n(250),k=n.n(N),S=n(18),C=n(52),x=n.n(C),I="UPDATE_TIME_FIELDS",D=function(e,t){return t.priority-e.priority},_=function(e){return!e.completed},F=function(e,t){return e.providerData[0].uid===t},P=function(e){return null!==e&&e.hasOwnProperty("id")&&e.hasOwnProperty("text")&&e.hasOwnProperty("datetime")},R=function(e){return null!==e&&e.hasOwnProperty("email")},L=function(e){return e.providerData[0].uid},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(S.parse)(e.datetime);return Object(S.isAfter)(Date.now(),t)?"danger":Object(S.differenceInMinutes)(t,Date.now())<5?"warning":"success"},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(S.parse)(e.datetime);return Object(S.distanceInWordsToNow)(t,{includeSeconds:!0,addSuffix:!0})};var U=function(){return{text:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,datetime:arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date}};function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case I:case f.actionTypes.SET:return Object.keys(t.todos).reduce(function(n,a){return Object(o.a)({},n,Object(w.a)({},a,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case f.actionTypes.SET:return P(n.todo)?e(Object(o.a)({},n.todo,{prioritycolor:j[n.todo.priority],prioritytext:y[n.todo.priority]}),{type:I}):t;case I:return Object(o.a)({},t,{datetimecolor:M(t),datetimetext:A(t)});default:return t}}(e[a],Object(o.a)({},t,{todo:t.todos[a]}))))},e);default:return e}}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:void 0,userFieldId:void 0,todos:{},currentTime:Date.now()},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case I:return Object(o.a)({},e,{currentTime:Date.now(),todos:q(e.todos,Object(o.a)({},t,{todos:e.todos}))});case f.actionTypes.LOGOUT:return Object(o.a)({},e,{uid:void 0,userFieldId:void 0,todos:{}});case f.actionTypes.SET_PROFILE:return R(t.profile)?Object(o.a)({},e,{uid:L(t.profile),user:t.profile}):e;case f.actionTypes.SET:return t&&t.path?function(e,t){if(!t.hasOwnProperty("data")||null===t.data)return console.warn("ignored action",t),e;switch(t.path){case"todos":return t.data.hasOwnProperty(e.uid)?Object(o.a)({},e,{todos:q(e.todos,Object(o.a)({},t,{todos:t.data[e.uid]}))}):e;case"users":return Object(o.a)({},e,{userFieldId:Object.keys(t.data).reduce(function(n,o){return F(t.data[o],e.uid)?o:n},e.userFieldId)});default:return e}}(e,t):e;default:return e}},X=function(e){var t=e.addTodo,n=e.uid,i=e.firebase,c=Object(a.useState)(U),s=Object(E.a)(c,2),l=s[0],u=s[1];function d(){""!==l.text&&(t(l,n,i)&&u(Object(o.a)({},l,{text:""})))}return r.a.createElement("div",null,r.a.createElement(T,{todo:l,onSubmit:function(e){13===e.keyCode&&d()},onAdd:d,onPriorityChange:function(e){u(Object(o.a)({},l,{priority:e.target.value}))},onDatetimeChange:function(e){u(Object(o.a)({},l,{datetime:e}))},onTextChange:function(e){u(Object(o.a)({},l,{text:e.target.value}))}}))},z=X,B=n(19),G=n.n(B);n(574),n(576),n(586),n(580);n(583)({origin:!0});G.a.initializeApp({apiKey:"AIzaSyCcSDFLCkpRMSeujLrSdQqYb3iwQk7fS-M",authDomain:"chama-hooks.firebaseapp.com",databaseURL:"https://chama-hooks.firebaseio.com",projectId:"chama-hooks",storageBucket:"chama-hooks.appspot.com",messagingSenderId:"518384846061"});G.a.database(),new G.a.auth.GoogleAuthProvider,G.a.auth();var J=G.a.messaging(),K=G.a.functions().httpsCallable("sendNotifications"),Q=G.a,V=(G.a,Object(g.c)({firebase:f.firebaseStateReducer,app:W})),Y={userProfile:"users",todos:"todos"},H=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):g.d)(Object(g.a)(x.a))(g.e),Z=function(e){return Object(g.d)(Object(f.reactReduxFirebase)(Q,Y))(H)(V,{})},$=function(e){var t=e.logout,n=e.login,o=e.uid,a=e.app;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},o?r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t()}},"Logout ",a.user.displayName):r.a.createElement("button",{className:"btn btn-success",onClick:function(){return n()}},"Login")))))};n.d(t,"App",function(){return ee});var ee=Object(g.d)(Object(f.firebaseConnect)(["users"]),Object(l.b)(function(e){return Object(o.a)({},e,{uid:e.app.uid,userFieldId:e.app.userFieldId,todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e.todos).filter(_).sort(D)}(e.app)})},function(e,t){var n=t.firebase;return{login:function(){n.login({provider:"google",type:"popup"})},logout:function(){n.logout()},notify:K,setFCM:function(e,t){console.log("set token"),n.set("users/".concat(t,"/notificationTokens/").concat(e),!0)},toggleTodo:function(e,t){n.set("todos/".concat(t,"/").concat(e.id,"/completed"),!e.completed)},addTodo:function(e,t){if(!t)return n.login({provider:"google",type:"popup"}),!1;var a=function(e){var t=k()(e.text),n=Object(S.format)(e.datetime);return Object(o.a)({},e,{id:t,datetime:n})}(e);return n.set("todos/".concat(t,"/").concat(a.id),a)},startTimer:function(){e({type:C.START_TIMER,payload:{actionName:I,timerName:"updateTimeFields",timerPeriod:2e4}})},stopTimer:function(){e({type:C.STOP_TIMER,payload:{timerName:"updateTimeFields"}})},setUpMessaging:function(e,t){return J.onTokenRefresh(function(){J.getToken().then(function(n){t(n,e)}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})}),J.requestPermission().then(function(){return J.getToken()}).then(function(n){return t(n,e)}).catch(function(e){"messaging/permission-blocked"===e.code?console.log("Please Unblock Notification Request Manually"):console.log("Error Occurred",e)}),function(){J.onTokenRefresh(void 0)}}}}))(function(e){var t=e.startTimer,n=e.stopTimer,o=e.setUpMessaging,i=e.setFCM,c=e.userFieldId;return Object(a.useEffect)(function(){if(c)return o(c,i),t(),function(){return n()}},[c]),r.a.createElement("div",null,r.a.createElement(z,e),e.uid?r.a.createElement(v,e):null,r.a.createElement($,e))}),te=Z({todos:[]}),ne=document.getElementById("root");c.a.render(r.a.createElement(s.a,{value:te},r.a.createElement(l.a,{store:te},r.a.createElement(ee,null))),ne),"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)})}},[[252,2,1]]]);
//# sourceMappingURL=main.87e378f4.chunk.js.map